!function(v,i,t,s){i.wp.gdrts.core.stars_rating={run:function(){wp.gdrts.hooks.addAction("gdrts-core-common-methods-run",function(t,s){i.wp.gdrts.core.stars_rating.single.init(s),i.wp.gdrts.core.stars_rating.list.init(s)}),wp.gdrts.hooks.addAction("gdrts-dynamic-process-onload",function(t){v(t).hasClass("gdrts-method-stars-rating")&&i.wp.gdrts.core.stars_rating.single.process(v(".gdrts-stars-rating",t))})},single:{init:function(t){v(".gdrts-rating-block .gdrts-stars-rating",t).each(function(){i.wp.gdrts.core.stars_rating.single.process(this)})},call:function(t,s){var r=i.wp.gdrts.core._b(t),a=i.wp.gdrts.core._d(t),e={todo:"vote",method:"stars-rating",item:a.item.item_id,nonce:a.item.nonce,render:a.render,uid:a.uid,meta:{value:s,max:a.stars.max}};wp.gdrts.hooks.doAction("gdrts-rating-method-pre-ajax","stars-rating",r,e),i.wp.gdrts.help.remote.call(e,i.wp.gdrts.core.stars_rating.single.voted,i.wp.gdrts.help.remote.error)},voted:function(t){if("error"===t.status)i.wp.gdrts.core.common.error(t);else{var s=v(t.render).hide();v("#gdrts-unique-id-"+t.uid).fadeOut(150,function(){v(this).replaceWith(s),s.fadeIn(300,function(){i.wp.gdrts.core.common.process(this),i.wp.gdrts.core.stars_rating.single.process(v(".gdrts-stars-rating",this)),v(this).attr("role","alert"),wp.gdrts.hooks.doAction("gdrts-stars-rating-voted",v(this)),wp.gdrts.hooks.doAction("gdrts-rating-block-loaded",v(this),"stars-rating")})})}},process:function(t){if(!v(t).data().hasOwnProperty("gdrts")){v(t).data("gdrts","done");var s=i.wp.gdrts.core._d(t).stars,r=i.wp.gdrts.core._d(t).labels;if(v(t).hasClass("gdrts-with-fonticon")){var a=s.type+"-"+s.name+"-"+s.max,e={font:s.name,name:s.type,length:s.max,content:Array(s.max+1).join(i.wp.gdrts.help.char(s.char))};i.wp.gdrts.core.style.star(a,e)}v(t).hasClass("gdrts-state-active")&&i.wp.gdrts.core.stars_rating.single.activity(t,s,r),s.responsive&&(v(i).on("load resize orientationchange",{el:t,data:s},i.wp.gdrts.core.responsive.stars),i.wp.gdrts.core.responsive._s({el:t,data:s})),wp.gdrts.hooks.doAction("gdrts-stars-rating-single-init",t)}},activity:function(l,h,w){v(".gdrts-stars-empty",l).mouseleave(function(t){if(!v(this).hasClass("gdrts-vote-saving")){var s=v(this).parent().find("input").val(),r=v(this).width()/h.max*s;v(l).data("selected",s).attr("title",""),v(".gdrts-stars-active",this).width(r)}}),v(".gdrts-stars-empty",l).mousemove(function(t){if(!v(this).hasClass("gdrts-vote-saving")){var s=v(this).offset(),r=v(this).width()/h.max,a=h.resolution,e=a*(r/100),i=h.max*r/e,n=t.pageX-s.left,o=gdrts_rating_data.rtl?i-Math.ceil(n/e)+1:Math.ceil(n/e),d=parseFloat((o*(a/100)).toFixed(2)),g=Math.ceil(1*d),c=w[g-1],p=o*e;v(l).data("selected",d).attr("title",d+": "+c),v(".gdrts-stars-active",this).width(p)}}),v(".gdrts-sr-button",l).click(function(t){t.preventDefault();var s=v(this).parent().find(".gdrts-sr-rating");i.wp.gdrts.core.stars_rating.single.do_rating(v(s).val(),s.parent(),l)}),v(".gdrts-stars-empty",l).click(function(t){t.preventDefault(),i.wp.gdrts.core.stars_rating.single.do_rating(v(l).data("selected"),this,l)})},do_rating:function(t,s,r){if(!v(s).hasClass("gdrts-vote-saving")&&(v(s).parent().find("input").val(t),!v(s).parent().hasClass("gdrts-passive-rating"))){var a=i.wp.gdrts.core._b(r);wp.gdrts.hooks.applyFilters("gdrts-stars-rating-do-vote",!0,t,a)?(v(s).addClass("gdrts-vote-saving"),i.wp.gdrts.core._b(v(s).parent()).addClass("gdrts-vote-saving"),i.wp.gdrts.core.stars_rating.single.call(r,t)):wp.gdrts.hooks.doAction("gdrts-stars-rating-vote-prevented",t,a)}}},list:{init:function(t){v(".gdrts-rating-list .gdrts-stars-rating",t).each(function(){i.wp.gdrts.core.stars_rating.list.process(this)})},process:function(t){if(!v(t).data().hasOwnProperty("gdrts")){v(t).data("gdrts","done");var s=i.wp.gdrts.core._d(t).stars;if(v(t).hasClass("gdrts-with-fonticon")){var r=s.type+"-"+s.name+"-"+s.max,a={font:s.name,name:s.type,length:s.max,content:Array(s.max+1).join(i.wp.gdrts.help.char(s.char))};i.wp.gdrts.core.style.star(r,a)}s.responsive&&(v(i).on("load resize orientationchange",{el:t,data:s},i.wp.gdrts.core.responsive.stars),i.wp.gdrts.core.responsive._s({el:t,data:s})),wp.gdrts.hooks.doAction("gdrts-stars-rating-list-init",t)}}}},i.wp.gdrts.core.stars_rating.run()}(jQuery,window,document);