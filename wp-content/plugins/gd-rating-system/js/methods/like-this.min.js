!function(r,d,s,t){d.wp.gdrts.core.like_this={run:function(){wp.gdrts.hooks.addAction("gdrts-core-common-methods-run",function(t,s){d.wp.gdrts.core.like_this.single.init(s),d.wp.gdrts.core.like_this.list.init(s)}),wp.gdrts.hooks.addAction("gdrts-dynamic-process-onload",function(t){r(t).hasClass("gdrts-method-like-this")&&d.wp.gdrts.core.like_this.single.process(r(".gdrts-like-this",t))})},single:{init:function(t){r(".gdrts-rating-block .gdrts-like-this",t).each(function(){d.wp.gdrts.core.like_this.single.process(this)}),r(s).on("mouseover",".gdrts-likes-theme-expanding .gdrts-like:not(.gdrts-like-expanded)",function(){r(this).addClass("gdrts-like-expanded"),r(".gdrts-like-this-suffix",this).animate({"margin-left":"5px"},100,function(){r(this).animate({"max-width":"256px"},150,function(){r(this).parent().next().animate({padding:"5px 10px 5px 20px"},100,function(){r(this).animate({"max-width":"512px"},150)})})})})},call:function(t,s){var i=d.wp.gdrts.core._b(t),e=d.wp.gdrts.core._d(t),r={todo:"vote",method:"like-this",item:e.item.item_id,nonce:e.item.nonce,render:e.render,uid:e.uid,meta:{value:s}};wp.gdrts.hooks.doAction("gdrts-rating-method-pre-ajax","like-this",i,r),d.wp.gdrts.help.remote.call(r,d.wp.gdrts.core.like_this.single.voted,d.wp.gdrts.help.remote.error)},voted:function(t){if("error"===t.status)d.wp.gdrts.core.common.error(t);else{var s=r(t.render).hide();r("#gdrts-unique-id-"+t.uid).fadeOut(150,function(){r(this).replaceWith(s),s.fadeIn(300,function(){d.wp.gdrts.core.common.process(this),d.wp.gdrts.core.like_this.single.process(r(".gdrts-like-this",this)),r(this).attr("role","alert"),wp.gdrts.hooks.doAction("gdrts-like-this-voted",r(this)),wp.gdrts.hooks.doAction("gdrts-rating-block-loaded",r(this),"like-this")})})}},adjust:function(t){var s=d.wp.gdrts.core._b(t).find(".gdrts-rating-text.gdrts-text-inline"),i=d.wp.gdrts.core._b(t).find(".gdrts-rating-please-wait.gdrts-text-inline"),e=r(".gdrts-like-link",t).outerHeight();s.length&&s.css("height",e+"px").css("line-height",e+"px"),i.length&&i.css("height",e+"px").css("line-height",e+"px")},process:function(t){var s=d.wp.gdrts.core._d(t).likes;if(d.wp.gdrts.core.like_this.single.adjust(t),r(t).hasClass("gdrts-with-fonticon")){var i=s.type+"-"+s.name,e={font:s.name,name:s.type,like:d.wp.gdrts.help.char(s.chars.like),liked:d.wp.gdrts.help.char(s.chars.liked),clear:d.wp.gdrts.help.char(s.chars.clear)};d.wp.gdrts.core.style.like(i,e)}r(t).hasClass("gdrts-state-active")&&d.wp.gdrts.core.like_this.single.activity(t,s),wp.gdrts.hooks.doAction("gdrts-like-this-single-init",t)},activity:function(i,t){r(".gdrts-sr-button",i).click(function(t){t.preventDefault(),d.wp.gdrts.core.like_this.single.do_rating(r(this).data("rating"),r(this).parent(),i)}),r(".gdrts-like-link",i).click(function(t){var s=r(this).find(".gdrts-clear-symbol, .gdrts-like-symbol").data("rating");d.wp.gdrts.core.like_this.single.do_rating(s,this,i)})},do_rating:function(t,s,i){if(!d.wp.gdrts.core._b(s).hasClass("gdrts-vote-saving")){var e=d.wp.gdrts.core._b(i);wp.gdrts.hooks.applyFilters("gdrts-like-this-do-vote",!0,t,e)?(d.wp.gdrts.core._b(r(s).parent()).addClass("gdrts-vote-saving"),d.wp.gdrts.core.like_this.single.call(i,t)):wp.gdrts.hooks.doAction("gdrts-like-this-vote-prevented",t,e)}}},list:{init:function(t){r(".gdrts-rating-list .gdrts-like-this",t).each(function(){d.wp.gdrts.core.like_this.list.process(this)})},process:function(t){if(!r(t).data().hasOwnProperty("gdrts")){r(t).data("gdrts","done");var s=d.wp.gdrts.core._d(t).likes;if(r(t).hasClass("gdrts-with-fonticon")){var i=s.type+"-"+s.name,e={font:s.name,name:s.type,like:d.wp.gdrts.help.char(s.chars.like),liked:d.wp.gdrts.help.char(s.chars.liked),clear:d.wp.gdrts.help.char(s.chars.clear)};d.wp.gdrts.core.style.like(i,e)}wp.gdrts.hooks.doAction("gdrts-like-this-list-init",t)}}}},d.wp.gdrts.core.like_this.run()}(jQuery,window,document);