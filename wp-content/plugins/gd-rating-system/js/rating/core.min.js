!function(o,d,t,s){o.fn.get_hidden_dims=function(t){var s=[],r=this,e=r.parents().addBack().not(":visible"),i={position:"absolute",visibility:"hidden",display:"block"},n={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};return t=null!==t&&t,e.each(function(){var r={},e=this;o.each(i,function(t,s){r[t]=e.style[t],e.style[t]=s}),s.push(r)}),n.width=r.width(),n.outerWidth=r.outerWidth(t),n.innerWidth=r.innerWidth(),n.height=r.height(),n.innerHeight=r.innerHeight(),n.outerHeight=r.outerHeight(t),e.each(function(t){var r=s[t],e=this;o.each(i,function(t,s){e.style[t]=r[t]})}),n},d.wp=d.wp||{},d.wp.gdrts=d.wp.gdrts||{},d.wp.gdrts.help={remote:{url:function(){return gdrts_rating_data.url+"?action="+gdrts_rating_data.handler},call:function(t,s,r){o.ajax({url:this.url(),type:"post",dataType:"json",data:{req:JSON.stringify(t)},success:s,error:r})},error:function(t,s,r){var e={uid:0,message:""};"object"==typeof t.responseJSON&&t.responseJSON.hasOwnProperty("uid")&&(e.uid=parseInt(t.responseJSON.uid),t.responseJSON.hasOwnProperty("message")&&(e.message=t.responseJSON.message)),""===e.message&&(e.message="Uncaught Error: "+r,0===t.status?e.message="No internet connection.":404===t.status?e.message="Requested page not found.":500===t.status?e.message="Internal Server Error.":"timeout"===s?e.message="Request timed out.":"abort"===s&&(e.message="Request aborted.")),!isNaN(e.uid)&&0<e.uid&&wp.gdrts.core.common.error(e);var i="AJAX ERROR: GD Rating System - "+e.message;"alert"===gdrts_rating_data.ajax_error?alert(i):"console"===gdrts_rating_data.ajax_error&&d.console&&console.log(i)}},char:function(t){return"&#x"===t.substring(0,3)?(t=t.replace(";",""),t=parseInt(t.substring(3),16),t=String.fromCharCode(t)):"&#"===t.substring(0,2)&&(t=t.replace(";",""),t=parseInt(t.substring(2),10),t=String.fromCharCode(t)),t}},d.wp.gdrts.dynamic={init:function(){var t={todo:"dynamic",items:[]};o(".gdrts-dynamic-block").each(function(){t.items.push(d.wp.gdrts.dynamic.process(this))}),d.wp.gdrts.help.remote.call(t,d.wp.gdrts.dynamic.load,d.wp.gdrts.help.remote.error)},process:function(t){var s=JSON.parse(o(".gdrts-rating-data",o(t)).html());return s.did=d.wp.gdrts.core.storage.did,o(t).attr("id","gdrts-dynamic-id-"+d.wp.gdrts.core.storage.did).addClass("gdrts-dynamic-loading"),d.wp.gdrts.core.storage.did++,s},load:function(t){t.status&&t.items&&"ok"===t.status&&o.each(t.items,function(t,s){d.wp.gdrts.dynamic.item(s)})},item:function(t){var s=o(t.render).hide();o("#gdrts-dynamic-id-"+t.did).fadeOut(150,function(){o(this).replaceWith(s),s.fadeIn(300,function(){d.wp.gdrts.core.common.process(this),wp.gdrts.hooks.doAction("gdrts-dynamic-process-onload",this),wp.gdrts.hooks.doAction("gdrts-rating-block-loaded",this,"dynamic-load")})})}},d.wp.gdrts.custom={init:function(t){d.wp.gdrts.custom.likes.init(t),d.wp.gdrts.custom.stars.init(t)},likes:{init:function(t){o(".gdrts-custom-like-block",t).not(".gdrts-custom-done").each(function(){d.wp.gdrts.custom.likes.process(this)})},process:function(t){if(o(t).addClass("gdrts-custom-done"),o(t).hasClass("gdrts-with-fonticon")){var s=o(t).data(),r=s.type+"-"+s.name,e={font:s.name,name:s.type,like:d.wp.gdrts.help.char(s.char),liked:d.wp.gdrts.help.char(s.char),clear:d.wp.gdrts.help.char(s.char)};d.wp.gdrts.core.style.like(r,e)}}},stars:{init:function(t){o(".gdrts-custom-stars-block",t).not(".gdrts-custom-done").each(function(){d.wp.gdrts.custom.stars.process(this)})},process:function(t){if(o(t).addClass("gdrts-custom-done"),o(t).hasClass("gdrts-with-fonticon")){var s=o(t).data(),r=s.type+"-"+s.name+"-"+s.max,e={font:s.name,name:s.type,length:s.max,content:Array(s.max+1).join(d.wp.gdrts.help.char(s.char))};d.wp.gdrts.core.style.star(r,e),1==s.responsive&&(o(d).on("load resize orientationchange",{el:t,data:s},d.wp.gdrts.core.responsive.stars),d.wp.gdrts.core.responsive._s({el:t,data:s}))}}}},d.wp.gdrts.core={storage:{uid:1,did:1,stars:[],likes:[]},_b:function(t){var s=o(t).data("uid");return o("#gdrts-unique-id-"+s)},_d:function(t){return this._b(t).data("rating")},run:function(){this.init(),this.live(),wp.gdrts.hooks.addAction("gdrts-rating-block-loaded",function(t,s){d.wp.gdrts.custom.init(t)}),d.wp.gdrts.custom.init(o("body"))},ajax:function(){this.live(),0<o(".gdrts-dynamic-block").length&&d.wp.gdrts.dynamic.init(),o(".gdrts-rating-block, .gdrts-rating-list").each(function(){d.wp.gdrts.core.common.process(this)});var t=o("body");d.wp.gdrts.core.common.methods(t),d.wp.gdrts.custom.init(t),wp.gdrts.hooks.doAction("gdrts-ajax-call-finish")},init:function(){wp.gdrts.hooks.doAction("gdrts-core-init-start"),0<o(".gdrts-dynamic-block").length&&d.wp.gdrts.dynamic.init(),o(".gdrts-rating-block, .gdrts-rating-list").each(function(){d.wp.gdrts.core.common.process(this)}),d.wp.gdrts.core.common.methods(o("body")),wp.gdrts.hooks.doAction("gdrts-core-init-finish")},live:function(){o(t).on("click",".gdrts-toggle-distribution",function(t){t.preventDefault(),o(this).hasClass("gdrts-toggle-open")?(o(this).removeClass("gdrts-toggle-open"),o(this).html(o(this).data("show")),o(".gdrts-rating-distribution",o(this).closest(".gdrts-rating-block")).slideUp()):(o(this).addClass("gdrts-toggle-open"),o(this).html(o(this).data("hide")),o(".gdrts-rating-distribution",o(this).closest(".gdrts-rating-block")).slideDown())})},style:{star:function(t,s){if(-1===o.inArray(t,d.wp.gdrts.core.storage.stars)){var r=".gdrts-with-fonticon.gdrts-fonticon-"+s.name+".gdrts-"+s.name+"-"+s.font+".gdrts-stars-length-"+s.length,e=r+" .gdrts-stars-empty::before, "+r+" .gdrts-stars-active::before, "+r+' .gdrts-stars-current::before { content: "'+s.content+'"; }',i="/* stars: "+s.name+" - "+s.font+" - "+s.length+" */",n="gdrts-style-stars-"+s.name+"-"+s.font+"-"+s.length;o('<style type="text/css" id="'+n+'">\r\n'+i+"\r\n"+e+"\r\n\r\n</style>").appendTo("head"),d.wp.gdrts.core.storage.stars.push(t)}},like:function(t,s){if(-1===o.inArray(t,d.wp.gdrts.core.storage.likes)){var r=".gdrts-with-fonticon.gdrts-fonticon-"+s.name+".gdrts-"+s.name+"-"+s.font+" .gdrts-like-this-symbol",e=r+'.gdrts-like-symbol::before { content: "'+s.like+'"; }'+r+'.gdrts-liked-symbol::before { content: "'+s.liked+'"; }'+r+'.gdrts-clear-symbol::before { content: "'+s.clear+'"; }',i="/* likes: "+s.name+" - "+s.font+" */",n="gdrts-style-likes-"+s.name+"-"+s.font;o('<style type="text/css" id="'+n+'">\r\n'+i+"\r\n"+e+"\r\n\r\n</style>").appendTo("head"),d.wp.gdrts.core.storage.likes.push(t)}}},common:{process:function(t){if(!o(t).data().hasOwnProperty("rating")){var s=JSON.parse(o(".gdrts-rating-data",o(t)).html());s.uid=d.wp.gdrts.core.storage.uid,o(t).attr("id","gdrts-unique-id-"+d.wp.gdrts.core.storage.uid).data("uid",d.wp.gdrts.core.storage.uid).data("rating",s),o(".gdrts-rating-element",t).data("uid",d.wp.gdrts.core.storage.uid),o(t).hasClass("gdrts-rating-list")?wp.gdrts.hooks.doAction("gdrts-rating-list-process",t):wp.gdrts.hooks.doAction("gdrts-rating-block-process",t),d.wp.gdrts.core.storage.uid++}},methods:function(t){wp.gdrts.hooks.doAction("gdrts-core-common-methods-run",this,t)},error:function(t){var s=o("#gdrts-unique-id-"+t.uid);s.removeClass("gdrts-vote-saving").append('<div class="gdrts-error-message">'+t.message+"</div>"),o(".gdrts-rating-please-wait",s).hide()}},responsive:{_s:function(t){var s=t.el,r=o(s).parent(),e=t.data,i=r.width(),n=Math.floor(i/e.max);n=n>e.size||0===n?e.size:n,"image"===e.type?(o(".gdrts-stars-empty, .gdrts-stars-active, .gdrts-stars-current",s).css("background-size",n+"px"),o(s).css("height",n+"px").css("width",e.max*n+"px")):(o(".gdrts-stars-empty",s).css("font-size",n+"px").css("line-height",n+"px"),o(s).css("line-height",n+"px").css("height",n+"px"))},stars:function(t){d.wp.gdrts.core.responsive._s(t.data)}}}}(jQuery,window,document);